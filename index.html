<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine's Day</title>
    <style>
        /* ========================================
           RESET & BASE STYLES
        ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            /* Soft romantic gradient background */
            background: linear-gradient(135deg, #ffd6e8 0%, #ffb3d9 50%, #ffd1dc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* ========================================
           CONTAINER
        ======================================== */
        .container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* ========================================
           ENVELOPE WRAPPER
        ======================================== */
        .envelope-wrapper {
            position: relative;
            width: 400px;
            height: 280px;
            cursor: pointer;
            /* Make focusable for keyboard accessibility */
            outline: none;
        }

        .envelope-wrapper:focus {
            outline: 3px solid #ff1744;
            outline-offset: 8px;
            border-radius: 4px;
        }

        /* ========================================
           ENVELOPE BODY (RECTANGLE)
        ======================================== */
        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e8dcc4 0%, #d9cdb0 100%);
            border: 2px solid #c9b896;
            border-radius: 4px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 2;
            transition: transform 0.8s ease, opacity 0.8s ease, box-shadow 0.3s ease;
        }

        /* Subtle hover effect on envelope body only when not opened */
        .envelope-wrapper:not(.opened):hover .envelope-body {
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
        }

        /* Add paper texture effect */
        .envelope-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 0, 0, 0.02) 2px,
                    rgba(0, 0, 0, 0.02) 4px
                );
            pointer-events: none;
        }

        /* When opened, envelope moves back and fades */
        .envelope-wrapper.opened .envelope-body {
            transform: scale(0.75) translateY(50px);
            opacity: 0.4;
        }

        /* ========================================
           ENVELOPE FLAP (TRIANGLE)
        ======================================== */
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            pointer-events: none;
            transition: transform 0.8s ease, opacity 0.8s ease;
        }

        .envelope-flap::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 200px solid transparent;
            border-right: 200px solid transparent;
            border-top: 140px solid #f0e6d2;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
            transform-origin: top center;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* When opened, flap rotates up */
        .envelope-wrapper.opened .envelope-flap::before {
            transform: translateX(-50%) rotateX(-180deg);
        }

        /* When opened, entire flap element moves back and fades with envelope body */
        .envelope-wrapper.opened .envelope-flap {
            transform: scale(0.75) translateY(50px);
            opacity: 0.4;
        }

        /* ========================================
           NOTE / CARD
        ======================================== */
        .note {
            position: fixed;
            width: 350px;
            background: linear-gradient(145deg, #ffffff 0%, #fff8f8 100%);
            border-radius: 12px;
            padding: 40px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            z-index: 1;
            /* Start hidden inside envelope */
            top: 50%;
            left: 50%;
            transform: translate(-50%, 100vh);
            opacity: 0;
            /* Prevent interaction until opened */
            pointer-events: none;
            /* Animation properties */
            transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.4s,
                        opacity 0.6s ease 0.4s,
                        z-index 0s 0.4s;
        }

        /* Add subtle paper texture to note */
        .note::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 0, 0, 0.01) 2px,
                    rgba(0, 0, 0, 0.01) 4px
                );
            pointer-events: none;
            border-radius: 12px;
        }

        /* When opened, note centers on screen */
        .envelope-wrapper.opened .note {
            transform: translate(-50%, -50%);
            opacity: 1;
            z-index: 10;
            pointer-events: auto;
        }

        /* ========================================
           SECOND NOTE (KISS GAME)
        ======================================== */
        .note-second {
            position: fixed;
            width: 350px;
            background: linear-gradient(145deg, #ffffff 0%, #fff8f8 100%);
            border-radius: 12px;
            padding: 40px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            z-index: 1;
            top: 50%;
            left: 150%;
            transform: translate(-50%, -50%);
            opacity: 0;
            pointer-events: none;
            transition: left 0.6s ease, opacity 0.6s ease;
        }

        .note-second.visible {
            left: 50%;
            opacity: 1;
            pointer-events: auto;
            z-index: 11;
        }

        .note-second::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 0, 0, 0.01) 2px,
                    rgba(0, 0, 0, 0.01) 4px
                );
            pointer-events: none;
            border-radius: 12px;
        }

        .kiss-title {
            color: #ff1744;
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
        }

        .stick-figure-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text y="28" font-size="28">üíã</text></svg>') 16 16, auto;
        }

        .stick-figure {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 200px;
            user-select: none;
            pointer-events: none;
            opacity: 1;
            -webkit-font-smoothing: antialiased;
        }

        .kiss-mark {
            position: absolute;
            font-size: 32px;
            pointer-events: none;
            animation: kissAppear 0.3s ease;
        }

        @keyframes kissAppear {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(10deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* Swipe hint */
        .swipe-hint {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff1744;
            font-size: 1.4em;
            font-weight: bold;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            z-index: 12;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(255, 23, 68, 0.3);
        }

        .swipe-hint.visible {
            opacity: 1;
            animation: swipeAnimation 1.5s ease-in-out infinite;
        }

        @keyframes swipeAnimation {
            0%, 100% {
                transform: translateX(-50%) translateX(0px);
            }
            50% {
                transform: translateX(-50%) translateX(-30px);
            }
        }

        /* Hide first note when second is visible */
        .note.hidden {
            left: -50%;
            opacity: 0;
        }

        /* ========================================
           SCREENSHOT BUTTON
        ======================================== */
        .screenshot-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            background: linear-gradient(135deg, #ff1744 0%, #d81b60 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 23, 68, 0.4);
            transition: transform 0.3s ease, box-shadow 0.2s ease;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            z-index: 20;
            opacity: 0;
        }

        .screenshot-btn.visible {
            transform: translateX(-50%) scale(1);
            opacity: 1;
        }

        .screenshot-btn:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 23, 68, 0.6);
        }

        .screenshot-btn:active {
            transform: translateX(-50%) scale(0.98);
        }

        /* ========================================
           NOTE TEXT STYLING
        ======================================== */
        .note-title {
            color: #ff1744;
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(255, 23, 68, 0.1);
            letter-spacing: 0.5px;
        }

        .note-subtitle {
            color: #d81b60;
            font-size: 1.1em;
            margin-bottom: 18px;
            text-align: center;
        }

        .note-poem {
            color: #333;
            font-size: 1em;
            line-height: 1.75;
            text-align: center;
        }

        /* ========================================
           CLICK HINT
        ======================================== */
        .click-hint {
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            color: #d81b60;
            font-size: 1.1em;
            animation: pulse 2s ease-in-out infinite;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.4s ease;
        }

        .envelope-wrapper.opened .click-hint {
            opacity: 0;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.6;
                transform: translateX(-50%) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateX(-50%) scale(1.05);
            }
        }

        /* ========================================
           FLOATING HEARTS DECORATION
        ======================================== */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            opacity: 0;
            animation: floatHeart 8s ease-in-out infinite;
            color: #ff69b4;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Stagger heart animations */
        .heart:nth-child(1) { left: 10%; animation-delay: 0s; font-size: 25px; }
        .heart:nth-child(2) { left: 20%; animation-delay: 2s; font-size: 18px; }
        .heart:nth-child(3) { left: 30%; animation-delay: 4s; font-size: 22px; }
        .heart:nth-child(4) { left: 40%; animation-delay: 1s; font-size: 20px; }
        .heart:nth-child(5) { left: 50%; animation-delay: 3s; font-size: 24px; }
        .heart:nth-child(6) { left: 60%; animation-delay: 5s; font-size: 19px; }
        .heart:nth-child(7) { left: 70%; animation-delay: 2.5s; font-size: 21px; }
        .heart:nth-child(8) { left: 80%; animation-delay: 4.5s; font-size: 23px; }
        .heart:nth-child(9) { left: 90%; animation-delay: 1.5s; font-size: 20px; }

        /* ========================================
           RESPONSIVE DESIGN
        ======================================== */
        @media (max-width: 600px) {
            .envelope-wrapper {
                width: 320px;
                height: 220px;
            }

            .envelope-flap::before {
                border-left: 160px solid transparent;
                border-right: 160px solid transparent;
                border-top: 110px solid #f0e6d2;
            }

            .note {
                width: 300px;
                padding: 30px 25px;
            }

            .note-second {
                width: 300px;
                padding: 30px 25px;
            }

            .stick-figure {
                font-size: 150px;
            }

            .stick-figure-container {
                height: 250px;
            }

            .kiss-mark {
                font-size: 28px;
            }

            .kiss-title {
                font-size: 1.2em;
                margin-bottom: 20px;
            }

            .swipe-hint {
                font-size: 1.2em;
                padding: 12px 25px;
            }

            .note-title {
                font-size: 1.2em;
            }

            .note-subtitle {
                font-size: 1em;
            }

            .note-poem {
                font-size: 0.9em;
                line-height: 1.65;
            }

            .click-hint {
                font-size: 1em;
                bottom: -50px;
            }
        }

        @media (max-width: 400px) {
            .envelope-wrapper {
                width: 280px;
                height: 200px;
            }

            .envelope-flap::before {
                border-left: 140px solid transparent;
                border-right: 140px solid transparent;
                border-top: 100px solid #f0e6d2;
            }

            .note {
                width: 260px;
                padding: 25px 20px;
            }

            .note-title {
                font-size: 1.1em;
            }

            .note-subtitle {
                font-size: 0.9em;
            }

            .note-poem {
                font-size: 0.85em;
            }
        }

        /* ========================================
           ACCESSIBILITY: REDUCED MOTION
        ======================================== */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            .envelope-wrapper:hover {
                transform: none;
            }

            .heart {
                display: none;
            }

            .click-hint {
                animation: none;
                opacity: 0.8;
            }
        }

        /* ========================================
           SCREEN READER ONLY TEXT
        ======================================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body>
    <!-- Floating hearts decoration (subtle background effect) -->
    <div class="hearts-container" aria-hidden="true">
        <div class="heart">‚ù§</div>
        <div class="heart">üíï</div>
        <div class="heart">üíñ</div>
        <div class="heart">‚ù§</div>
        <div class="heart">üíï</div>
        <div class="heart">üíñ</div>
        <div class="heart">‚ù§</div>
        <div class="heart">üíï</div>
        <div class="heart">üíñ</div>
    </div>

    <!-- Main container -->
    <div class="container">
        <!-- Envelope (interactive element) -->
        <div 
            class="envelope-wrapper" 
            role="button" 
            tabindex="0"
            aria-label="Click to open Valentine's Day envelope"
            aria-pressed="false"
        >
            <!-- Screen reader announcement -->
            <span class="sr-only">Press Enter or Space to open the envelope</span>

            <!-- Envelope body (main rectangle) -->
            <div class="envelope-body"></div>

            <!-- Envelope flap (triangle that opens) -->
            <div class="envelope-flap"></div>

            <!-- Note that slides out -->
            <div class="note" role="article" aria-labelledby="note-title">
                <h1 class="note-title" id="note-title">HAPPY VALENTINES DAY HABIBTI!</h1>
                <p class="note-subtitle">A little poem for you:</p>
                <p class="note-poem">
                    My love. You are the answer to my duaas. Those duaas that i made for a righteous, beautiful spouse who would be the light of my eyes. Who would bring me closer to the most high. Who would bear for me children that would serve this deen. Who would be my inspiration. Who would be my rock. My best friend. I love you and can't wait for the rest of my life with you
                </p>
            </div>

            <!-- Click hint text -->
            <div class="click-hint" aria-hidden="true">Click to open ‚ù§</div>
        </div>

        <!-- Second note (kiss game) -->
        <div class="note-second" role="article">
            <h2 class="kiss-title">Leave a kiss üíã</h2>
            <div class="stick-figure-container" id="kissCanvas">
                <div class="stick-figure">üßç</div>
            </div>
            <button class="screenshot-btn" id="screenshotBtn">üì∏ Take a Screenshot</button>
        </div>

        <!-- Swipe hint -->
        <div class="swipe-hint" id="swipeHint">‚Üê Swipe to see more</div>
    </div>

    <script>
        // ========================================
        // INTERACTIVE FUNCTIONALITY
        // ========================================

        // Get the envelope element
        const envelope = document.querySelector('.envelope-wrapper');
        const firstNote = document.querySelector('.note');
        const secondNote = document.querySelector('.note-second');
        const swipeHint = document.getElementById('swipeHint');
        const kissCanvas = document.getElementById('kissCanvas');
        const screenshotBtn = document.getElementById('screenshotBtn');
        
        // Track opened state
        let isOpened = false;
        let touchStartX = 0;
        let touchEndX = 0;
        let kissCount = 0;

        // Function to toggle envelope open/closed
        function toggleEnvelope() {
            isOpened = !isOpened;
            
            if (isOpened) {
                envelope.classList.add('opened');
                envelope.setAttribute('aria-pressed', 'true');
                envelope.setAttribute('aria-label', 'Valentine\'s Day envelope opened. Click to close.');
                
                // Show swipe hint after 2 seconds
                setTimeout(() => {
                    swipeHint.classList.add('visible');
                }, 2000);
            } else {
                envelope.classList.remove('opened');
                envelope.setAttribute('aria-pressed', 'false');
                envelope.setAttribute('aria-label', 'Click to open Valentine\'s Day envelope');
                swipeHint.classList.remove('visible');
            }
        }

        // Swipe detection
        firstNote.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        firstNote.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        // Mouse swipe detection (drag)
        let mouseDown = false;
        let mouseStartX = 0;

        firstNote.addEventListener('mousedown', function(e) {
            mouseDown = true;
            mouseStartX = e.clientX;
        });

        document.addEventListener('mousemove', function(e) {
            if (mouseDown && isOpened) {
                const diff = e.clientX - mouseStartX;
                if (diff < -50) {
                    firstNote.style.transform = `translate(${-50 + (diff / 10)}%, -50%)`;
                }
            }
        });

        document.addEventListener('mouseup', function(e) {
            if (mouseDown && isOpened) {
                const diff = e.clientX - mouseStartX;
                if (diff < -100) {
                    showSecondNote();
                } else {
                    firstNote.style.transform = 'translate(-50%, -50%)';
                }
                mouseDown = false;
            }
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                // Swiped left
                showSecondNote();
            }
        }

        function showSecondNote() {
            firstNote.classList.add('hidden');
            secondNote.classList.add('visible');
            swipeHint.classList.remove('visible');
            swipeHint.style.display = 'none';
        }

        // Kiss interaction
        kissCanvas.addEventListener('click', function(e) {
            const rect = kissCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            addKiss(x, y);
        });

        kissCanvas.addEventListener('touchend', function(e) {
            e.preventDefault();
            const rect = kissCanvas.getBoundingClientRect();
            const touch = e.changedTouches[0];
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            addKiss(x, y);
        });

        function addKiss(x, y) {
            const kiss = document.createElement('div');
            kiss.className = 'kiss-mark';
            kiss.textContent = 'üíã';
            kiss.style.left = (x - 16) + 'px';
            kiss.style.top = (y - 16) + 'px';
            kissCanvas.appendChild(kiss);
            
            // Show screenshot button after first kiss
            kissCount++;
            if (kissCount === 1) {
                screenshotBtn.classList.add('visible');
            }
        }

        // Mouse click handler
        envelope.addEventListener('click', toggleEnvelope);

        // Keyboard accessibility (Enter or Space key)
        envelope.addEventListener('keydown', function(event) {
            // Check if Enter (13) or Space (32) was pressed
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault(); // Prevent page scroll on Space
                toggleEnvelope();
            }
        });

        // Optional: Add extra hearts when envelope opens (decorative)
        envelope.addEventListener('click', function() {
            if (envelope.classList.contains('opened')) {
                createBurstHearts();
            }
        });

        // Function to create burst of hearts when opened
        function createBurstHearts() {
            const container = document.querySelector('.hearts-container');
            
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.textContent = ['‚ù§', 'üíï', 'üíñ'][Math.floor(Math.random() * 3)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.fontSize = (Math.random() * 15 + 20) + 'px';
                    heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
                    container.appendChild(heart);
                    
                    // Remove heart after animation
                    setTimeout(() => {
                        heart.remove();
                    }, 8000);
                }, i * 100);
            }
        }

        // ========================================
        // ACCESSIBILITY ANNOUNCEMENT
        // ========================================
        
        // Announce to screen readers when envelope opens
        envelope.addEventListener('click', function() {
            if (envelope.classList.contains('opened')) {
                // Create live region announcement
                const announcement = document.createElement('div');
                announcement.setAttribute('role', 'status');
                announcement.setAttribute('aria-live', 'polite');
                announcement.className = 'sr-only';
                announcement.textContent = 'Envelope opened. Valentine\'s Day message now visible.';
                document.body.appendChild(announcement);
                
                // Remove after announcement
                setTimeout(() => {
                    announcement.remove();
                }, 3000);
            }
        });

        // ========================================
        // SCREENSHOT FUNCTIONALITY
        // ========================================
        screenshotBtn.addEventListener('click', function() {
            // Change button text
            screenshotBtn.textContent = 'üì∏ Capturing...';
            screenshotBtn.disabled = true;
            
            // Create a canvas to draw the content
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size to match the kiss canvas
            const rect = kissCanvas.getBoundingClientRect();
            canvas.width = rect.width * 2; // 2x for better quality
            canvas.height = rect.height * 2;
            
            // Scale context for better quality
            ctx.scale(2, 2);
            
            // Fill white background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, rect.width, rect.height);
            
            // Draw stick figure emoji in center
            ctx.font = '200px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('üßç', rect.width / 2, rect.height / 2);
            
            // Draw all kiss marks
            const kissMarks = kissCanvas.querySelectorAll('.kiss-mark');
            ctx.font = '32px Arial';
            kissMarks.forEach(kiss => {
                const x = parseFloat(kiss.style.left) + 16;
                const y = parseFloat(kiss.style.top) + 16;
                ctx.fillText('üíã', x, y);
            });
            
            // Convert to JPEG and download
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.download = 'valentine-kisses.jpg';
                link.href = url;
                link.click();
                
                // Clean up
                URL.revokeObjectURL(url);
                
                // Reset button
                screenshotBtn.textContent = 'üì∏ Take a Screenshot';
                screenshotBtn.disabled = false;
            }, 'image/jpeg', 0.95);
        });
    </script>
</body>
</html>
